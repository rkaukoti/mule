<?xml version="1.0" encoding="ISO-8859-1"?>
<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:jms="http://www.mulesoft.org/schema/mule/transport/jms"
      xmlns:vm="http://www.mulesoft.org/schema/mule/transport/vm"
      xmlns="http://www.mulesoft.org/schema/mule/core"
      xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
           http://www.mulesoft.org/schema/mule/transport/jms http://www.mulesoft.org/schema/mule/transport/jms/current/mule-transport-jms.xsd

           http://www.mulesoft.org/schema/mule/transport/vm http://www.mulesoft.org/schema/mule/transport/vm/current/mule-transport-vm.xsd">


    <configuration defaultResponseTimeout="5000"/>

    <jms:activemq-connector name="jmsConnector" specification="1.1"/>

    <flow name="component1">
        <vm:inbound-endpoint path="component1" exchange-pattern="one-way"/>
        <component class="org.mule.functional.testmodels.services.TestReceiver"/>
        <transactional action="ALWAYS_BEGIN">
            <all>
                <jms:outbound-endpoint queue="my.queue1" exchange-pattern="one-way">
                    <jms:transaction action="ALWAYS_JOIN"/>
                </jms:outbound-endpoint>
                <jms:outbound-endpoint queue="my.queue2" exchange-pattern="one-way">
                    <jms:transaction action="ALWAYS_JOIN"/>
                </jms:outbound-endpoint>
            </all>
        </transactional>
    </flow>

    <flow name="component2">
        <jms:inbound-endpoint queue="component2" exchange-pattern="one-way">
            <jms:transaction action="ALWAYS_BEGIN"/>
        </jms:inbound-endpoint>
        <component class="org.mule.functional.testmodels.services.TestReceiver"/>
        <all>
            <jms:outbound-endpoint queue="my.queue3" exchange-pattern="one-way">
                <jms:transaction action="NONE"/>
            </jms:outbound-endpoint>
            <jms:outbound-endpoint queue="my.queue4" exchange-pattern="one-way">
                <jms:transaction action="NONE"/>
            </jms:outbound-endpoint>
        </all>
    </flow>

</mule>
